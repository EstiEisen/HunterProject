<div class="dialog-header">
    <span class="pointer" (click)="close()">
    <i class="fa fa-close"></i>
  </span>
  <span>העבר לטיפול</span>
</div>
<form #form="ngForm" class="py-4">
  <p class="grey-color f-14">סוג גורם</p>
  <div class="d-flex status status-bar">
    <div class="pointer" (click)="loadEntities('company')" [ngClass]="{'active': activeContentType === 'company'}">חברה מנהלת</div>
    <div class="pointer" (click)="loadEntities('employer')" [ngClass]="{'active': activeContentType === 'employer'}">מעסיק</div>
    <div class="pointer" (click)="loadEntities('user')" [ngClass]="{'active': activeContentType === 'user'}">לשכת שרות</div>
    <div class="pointer" (click)="loadEntities('myhr')" [ngClass]="{'active': activeContentType === 'myhr'}">תוכנות MYHR</div>
  </div>

  <div class="mb-4 mt-4" [@fade]="activeContentType !== 'myhr' ? 'active' : 'inactive'">
    <bd-select class="ml-4" name="contactsAdd"  [items]="contacts" placeholder="אנשי קשר"  [multiple]="true" (ngModel)="contactsAdd" ></bd-select>
  </div>
  <mat-form-field class="w-100" [@fade]="activeContentType !== 'myhr' ? 'active' : 'inactive'">
    <mat-chip-list #chipList  [required]="contactsAdd.length == 0">
      <mat-chip *ngFor="let email of Emails" [selectable]="selectable"
                [removable]="removable" (removed)="remove(email)">
        {{email.name}}
        <mat-icon matChipRemove *ngIf="removable">cancel</mat-icon>
      </mat-chip>
      <input placeholder="הוספת כתובת מייל"
             [matChipInputFor]="chipList"
             [matChipInputSeparatorKeyCodes]="separatorKeysCodes"
             [matChipInputAddOnBlur]="addOnBlur"
             (matChipInputTokenEnd)="add($event)">
    </mat-chip-list>
  </mat-form-field>
  <div class="mb-4 mt-5" [@fade]="activeContentType === 'myhr' ? 'active' : 'inactive'">
    <h6 class="d-flex bold f-12">סיבת העברה</h6>
    <mat-radio-group [(ngModel)]="action" name="action">
      <mat-radio-button class="ml-4" value="1">העברת בעלות</mat-radio-button>
      <mat-radio-button class="ml-4" value="2">הפקת פוליסה</mat-radio-button>
    </mat-radio-group>
  </div>
  <div class="form-group">
    <label for="comment">תוכן:</label>
    <mat-form-field class="w-100">
      <textarea matInput  class="form-control" rows="5" id="comment" name="comments"  [(ngModel)]="comments"></textarea>
      <!--<mat-error  *ngIf="comments.length <= 0 && form.submitted">יש להוסיף הערה</mat-error>-->
    </mat-form-field>
  </div>
  <div class="mt-3 pointer" [@fade]="activeContentType !== 'myhr' ? 'active' : 'inactive'">
    <label class="file-label">
      <img src="/assets/img/icons/circle_arrow_up.png">
      <span class="file-label-text">{{ uploadedFile ? (uploadedFile[0].name | slice : 0:20) : 'העלאת קובץ חדש' }}</span>
      <input type="file" (change)="uploadedFile = $event.target.files" multiple>
    </label>
  </div>

<p class="alert alert-danger" [@fade]="hasServerError ? 'active' : 'inactive'">שגיאת שרת, נסה שנית או צור קשר.</p>
  <div mat-dialog-actions class="justify-content-center mt-2">
    <button class="btn blue-btn" (click)="submit(form)">שלח</button>
  </div>
</form>

