<form #form="ngForm" class="px-4 mt-5 form">
  <div *ngIf="plan != null"  class="col-6">
    <div class="d-flex bold mb-3 f-18">
      <span> שלום,    </span>
      <span class="blue-color">{{userSession.getUser().username}}</span>
    </div>
    <div class="d-flex mb-3 f-16">
      <span>להלן משימה לטיפולך</span>
    </div>
    <div class="border-shadow p-3 mt-2">
      <span class="f-18 text-center bold"> {{errorsDetails[getCurrentError()].title + ' (' + plan.type.name + ') '}}</span>
      <br>
      <br>
        <div class="d-flex w-50">
          <span class="bold">שם הארגון:</span>
          <p class="mr-1">{{ plan.organization.name }}</p>
        </div>
        <div class="d-flex w-50" *ngIf="plan.employer">
          <span class="bold">שם מעסיק:</span>
          <p class="mr-1">{{plan.employer.name}}</p>
        </div>
      <div class="d-flex w-75" *ngIf="plan.company || (plan.task.compensation && plan.task.compensation.company)">
        <span class="bold" >שם חברה מנהלת:</span>
        <p class="mr-1">{{plan.company ? plan.company : plan.task.compensation.company}}</p>
      </div>
      <div *ngIf="errorsDetails['paymentInstructions'].error || errorsDetails['fileError'].error">
        <div class="d-flex mt-3">
          <div class="d-flex w-50" >
            <span class="bold">שם תהליך:</span>
            <p class="mr-1">{{plan.task.process.name }}</p>
          </div>
          <div class="d-flex w-50">
            <span class="bold">חודש ייחוס:</span>
            <p class="mr-1">{{  plan.task.process.date }}</p>
          </div>
        </div>
        <div class="d-flex mt-3">
          <div class="d-flex w-50" *ngIf="plan.task.message">
            <span class="bold">פירוט שגיאה:</span>
            <p class="mr-1">{{ plan.task.message }}</p>
          </div>
          <div class="d-flex w-50" *ngIf="plan.task.additional_info">
            <span class="bold">מידע נוסף:</span>
            <p class="mr-1">{{  plan.task.additional_info  }}</p>
          </div>
        </div>
        <div class="d-flex">
          <div class="d-flex w-50">
            <span class="bold">סוג:</span>
            <p class="mr-1">{{ getType() }}</p>
          </div>
          <div class="d-flex w-50">
            <span class="bold">סכום קובץ:</span>
            <p class="mr-1">{{ plan.task.process.total }}</p>
          </div>
        </div>
      </div>
      <div *ngIf="errorsDetails['file'].error || errorsDetails['record'].error">
         <div class="d-flex mt-3">
           <div class="d-flex w-50" >
             <span class="bold">שם תהליך:</span>
             <p class="mr-1">{{plan.task.process.name }}</p>
           </div>
           <div class="d-flex w-50">
             <span class="bold">חודש ייחוס:</span>
             <p class="mr-1">{{  plan.task.process.date }}</p>
           </div>
         </div>
         <div class="d-flex mt-3">
          <div class="d-flex w-50">
            <span class="bold">פירוט שגיאה:</span>
            <p class="mr-1">{{ plan.task.message }}</p>
          </div>
          <div class="d-flex w-50" *ngIf="plan.task.additional_info">
            <span class="bold">מידע נוסף:</span>
            <p class="mr-1">{{  plan.task.additional_info  }}</p>
          </div>
         </div>
         <div *ngIf="errorsDetails['record'].error">
           <div class="d-flex mt-3">
            <div class="d-flex w-50">
              <span class="bold">תאריך ייחוס:</span>
              <p class="mr-1">{{ plan.task.record.salary_month | date: 'MM/yy'}}</p>
            </div>
             <div class="d-flex w-50">
              <span class="bold">שכר:</span>
              <p class="mr-1">{{ plan.task.record.salary }}</p>
             </div>
           </div>
           <div class="d-flex mt-3">
            <div class="d-flex w-50">
              <span class="bold">ימי עבודה בחודש:</span>
              <p class="mr-1">{{plan.task.record.working_days_in_month }}</p>
            </div>
            <span class="bold">חלקיות משרה:</span>
            <p class="mr-1">{{ plan.task.record.work_month_percentage  }}</p>
           </div>
           <div class="d-flex mt-3">
            <div class="d-flex w-50">
              <span class="bold">סטטוס עובד בחודש:</span>
              <p class="mr-1">{{ employeeStatus[plan.task.record.employee_status]  }}</p>
            </div>
            <span class="bold">תאריך עדכון סטטוס:</span>
            <p class="mr-1">{{ plan.task.record.employee_status_start_date }}</p>
           </div>
         </div>
         <div *ngIf="errorsDetails['file'].error">
           <div class="d-flex mt-3">
             <div class="d-flex w-50">
              <span class="bold">סוג קובץ:</span>
              <p class="mr-1">{{ fileType[plan.task.file.file_type] }}</p>
            </div>
            <div class="d-flex w-50">
              <span class="bold">סכום:</span>
              <p class="mr-1">{{(plan.task.file.amount | number: '1.2-2') }}</p>
            </div>
           </div>
         </div>
       </div>
      <div *ngIf="errorsDetails['compensationEmployee'].error || errorsDetails['compensationEmployer'].error">
        <div class="d-flex" *ngIf="errorsDetails['compensationEmployee'].error">
<!--          <div class="d-flex w-50" >-->
<!--            <span class="bold">מידע נוסף:</span>-->
<!--            <p class="mr-1">{{errorsDetails[getCurrentError()].message }}</p>-->
<!--          </div>-->
         <div class="d-flex w-50">
           <span class="bold" >שם העובד:</span>
           <p class="mr-1">{{plan.task.compensation.employee_name}}</p>
         </div>
         <div class="d-flex w-50">
           <span class="bold" >תעודת זהות:</span>
           <p class="mr-1">{{plan.task.compensation.employee_identifier}}</p>
         </div>
        </div>
        <div class="d-flex">
          <div class="d-flex w-50">
            <span class="bold" >תאריך נכונות:</span>
            <p class="mr-1">{{plan.task.compensation.validity_date}}</p>
          </div>
          <div class="d-flex w-50">
            <span class="bold" >תאריך עידכון בקשה:</span>
            <p class="mr-1">{{plan.task.compensation.updated_at}}</p>
          </div>
        </div>
        <div class="d-flex">
          <div class="d-flex w-50">
            <span class="bold" >מקור מידע:</span>
            <p class="mr-1">{{getTypeSendingMethods()}}</p>
          </div>
          <div class="d-flex w-50">
            <span class="bold" >סטטוס:</span>
            <p class="mr-1">{{getStatus()}}</p>
          </div>
        </div>
      </div>
      <div *ngIf="errorsDetails['employerError'].error">
        <div class="d-flex w-75">
          <span class="bold" >פרוט:</span>
          <p class="mr-1">{{plan.type.name}}</p>
        </div>
      </div>
<!--      <div class="d-flex w-50">-->
<!--        <span class="bold" >סטטוס:</span>-->
<!--        <p class="mr-1">{{plan}}</p>-->
<!--      </div>-->
      <br>
      <button class="btn blue-btn" (click)="taskCompletedDialog()">לביצוע</button>
    </div>
  </div>
  <div *ngIf="plan == null && (noMoreTask || noMorePlans)">
    <span class="red-color f-18" *ngIf="noMorePlans">לא קיימות תוכניות </span>
    <span class="red-color f-18" *ngIf="noMoreTask">לא קיימות משימות </span>
    <div class="d-flex ">
      <img src="../../../../../assets/img/thumb-photostock-vector-check-list-icon-vector.jpg" height="300"
           width="300" />
    </div>
  </div>
</form>


