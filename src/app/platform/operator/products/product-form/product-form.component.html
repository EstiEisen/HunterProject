<div class="mr-5 px-4">
  <form #form="ngForm">
    <mat-form-field class="h4 mb-4 mt-3">
      <input matInput type="text" name="name" [(ngModel)]="product.name" placeholder="שם קופה" required>
    </mat-form-field>
    <mat-form-field class="h4 mb-4 mr-3 mt-3">
      <input matInput type="text" name="code" [(ngModel)]="product.code" placeholder="מספר קופה" required>
    </mat-form-field>
    <!--<div>-->
      <!--<mat-form-field class="h4 mb-4 mr-3">-->
        <!--<input matInput type="text" [name]="'company_name' + index" [(ngModel)]="product.company_name" placeholder="חברה מנהלת" required>-->
      <!--</mat-form-field>-->
    <!--</div>-->
    <!--<p class="h4 mb-4">{{ product.name + ' ' + product.code }}</p>-->
    <!--<p class="h5 mb-4">{{ product.company_name }}</p>-->
    <!--<div>-->
      <!--<img src="/assets/img/icons/edit_grey.png" class="row-image" (click)="isEdit = true">-->
    <!--</div>-->
    <div class="row mt-3">
      <div class="col-12 col-lg-4">
        <bd-select  class="w-100" [items]="entities" name="entity_id" #entityIDSelect="ngModel" [(ngModel)]="product.company_id" placeholder="חברה מנהלת" required [error]="entityIDSelect.errors && form.submitted"></bd-select>
      </div>

    </div>
    <div class="border-bottom w-75">
      <p class="grey-color bold f-14 mt-5 mb-0">פיננסי</p>
    </div>
    <div class="d-flex align-items-center mt-3" *ngFor="let ba of product.bank_account;  let last = last; let index = index">
      <!--<div [style.visibility]='hidden'>-->
        <!--<mat-form-field hidden>-->
          <!--<input matInput type="text" [name]="'finance_id' + index" [(ngModel)]="payments.id">-->
        <!--</mat-form-field>-->
      <!--</div>-->
      <div class="bd-select-container">
        <bd-select [name]="'bank_id' + index"  [items]="banks" #bankIDSelect="ngModel" [(ngModel)]="ba.bank_id" placeholder="בחר בנק" (onSelect)="selectedBankBranch(index)" required></bd-select>
        <mat-error [@fade]="bankIDSelect.errors && form.submitted ? 'active' : 'inactive'">שדה חובה. </mat-error>
      </div>
      <div class="bd-select-container mr-3">
        <bd-select [name]="'branch_id' + index"  [items]="bankBranchesDeposit" #branchIDSelect="ngModel" [(ngModel)]="ba.branch_id"  placeholder="בחר סניף" required></bd-select>
        <mat-error [@fade]="branchIDSelect.errors && form.submitted ? 'active' : 'inactive'">שדה חובה. </mat-error>
      </div>
      <mat-form-field class="mr-3">
        <input matInput type="text" [name]="'account_number' + index" [(ngModel)]="ba.account_number" placeholder="מס' חשבון" maxlength="8" pattern="^\d{5,8}$" required>
        <mat-error>יש להקיש מעל 5 ספרות.</mat-error>
      </mat-form-field>
      <mat-checkbox class="mx-3" [name]="'is_primary' + index" [(ngModel)]="ba.is_primary" (change)="primaryBankChecked(index, $event.checked)">ראשי</mat-checkbox>
      <i class="fa fa-plus-circle fa-2x pointer blue-color" (click)="addBankRow(index)" *ngIf="last && index < 4"></i>
    </div>
    <p class="alert alert-danger" [@fade]="hasServerError ? 'active' : 'inactive'">שגיאת שרת, נסה שנית או צור קשר.</p>
    <div class="mt-3">
      <button class="btn blue-btn" type="submit" (click)="submit(form)">שמירה</button>
    </div>
  </form>
</div>
