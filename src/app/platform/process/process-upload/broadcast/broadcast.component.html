
<table class="table table-bordered">
  <thead>
  <tr>
    <th scope="col">{{ processDataService.activeProcess.name + ' '
    + processDataService.activeProcess.monthName + ' '
    + processDataService.activeProcess.year }}</th>
    <td scope="col">{{ processDataService.activeProcess.monthName }}</td>
    <td scope="col">{{ processDataService.activeProcess.year }}</td>
  </tr>
  </thead>
</table>
<div class="col-6  offset-3" [@fade]="pageNumber === 1? 'active': 'inactive'">
      <div *ngIf="!isRefund">
        <h5 class="bold text-center">תהליך שידור</h5>
        <p class="f-12 text-center grey-color">להלן פרטי הנתונים הפנסיוניים לשידור לקופות</p>
      </div>
      <div *ngIf="isRefund">
        <h5 class="bold text-center">תהליך שידור קובץ שלילי</h5>
        <p class="f-12 text-center grey-color">להלן פרטי הבקשה להחזר מהקופות</p>
      </div>
      <p class="border-bottom f-14 bold grey-color">פרטי התהליך</p>
      <div class="d-flex">
        <span class="w-50">שם המעסיק: {{process_details.employer_name}} </span>
        <span>ח.פ: {{process_details.employer_business_number}} </span>
      </div>
      <div class="d-flex my-3">
        <span class="w-50">שם מחלקה: {{process_details.department_name}}</span>
        <span>מספר תהליך: {{process_details.id}}</span>
      </div>
      <div class="d-flex my-3">
        <span class="w-50">שם התהליך: {{process_details.name}}</span>
        <span>חודש שכר: {{process_details.date | slice:5:7}}</span>
      </div>
      <p class="border-bottom f-14 bold grey-color">פרטי התשלומים</p>
      <div class="text-right">
        <span>סכום לתשלום: {{process_details.total}}</span>
      </div>
      <div class="d-flex my-3">
        <span class="w-50 text-right">מספר קבצים: {{process_details.groups_count}}</span>
        <span class="pointer" (click)="setPage('detailed-files')">לפירוט מלא ></span>
      </div>
      <div class="d-flex">
        <span class="w-50 text-right"> מספר רשומות:{{process_details.records_count }}</span>
        <span (click)="setPage('detailed-records')" class="pointer">לפירוט מלא ></span>
      </div>
      <div *ngIf="!isRefund">
        <div class="d-flex mt-2">
          <span class="w-50 text-right">תאריך תשלום (ערך): {{paymentDate}}</span>
          <span class="pointer" (click)="dateUpdate()">לעדכון תאריך ></span>
        </div>
        <p class="f-12 bold red-color">הנך נדרש לעדכן תאריך ערך</p>
      </div>
      <div class="mt-4 d-flex" *ngIf="isRefund" >
        <p class="text-right bold red-color f-12">שים לב! </p>
        <p class="f-12 mr-2">בשידור לקופות הנך מאשר כי קובץ ההצהרה לבקשת החזר יהיה ממוען לחברות המנהלות בקובץ</p>
      </div>
      <mat-checkbox *ngIf="!isRefund" [(ngModel)]="valid">
        <div class="text-wrap text-right mt-4">
          <p class="f-12">הנני מאשר כי פרטי התשלום המוצגים מעלה נבדקו מול תוכנת השכר והנם תקינים.
            בשידור לקופות הקבצים יועברו על פי הנתונים הקיימים ופיולה זואינה ניתנת לביטול.</p>
        </div>
      </mat-checkbox>
      <div class="text-center mt-5">
        <button class="btn blue-btn" [disabled]="!valid && !isRefund || !paymentDate" (click)="transfer();
        processDataService.activeProcess.pageNumber = 5">שידור לקופות</button>
      </div>
    </div>
<div class="col-6 offset-3" [@fade]="pageNumber === 2? 'active': 'inactive'">
  <p class="h5 bold text-center mb-5" *ngIf="isRefund">בקשת ההחזר הועברה לקופות בהצלחה!</p>
  <div class="text-center" *ngIf="!isRefund">
    <p class="h5 bold mb-2">שידור בוצע בהצלחה!</p>
    <p class="f-12">להלן סכום נתוני השידור</p>
  </div>
  <p class="border-bottom f-14 bold grey-color">פרטי התהליך</p>
  <div class="d-flex">
    <span class="w-50">שם המעסיק: {{process_details.employer_name}} </span>
    <span>ח.פ: {{process_details.employer_business_number}} </span>
  </div>
  <div class="d-flex my-3">
    <span class="w-50">שם מחלקה: {{process_details.department_name}}</span>
    <span>מספר תהליך: {{process_details.id}}</span>
  </div>
  <div class="d-flex my-3">
    <span class="w-50">שם התהליך: {{process_details.name}}</span>
    <span>חודש שכר: {{process_details.date | slice:5:7}}</span>
  </div>
  <p class="border-bottom f-14 bold grey-color">פרטי התשלומים</p>
  <div class="text-right">
    <span>סכום לתשלום: {{process_details.total}}</span>
  </div>
  <div class="d-flex my-3">
    <span class="w-50 text-right">מספר קבצים: {{ process_details.groups_count}}</span>
    <span class="pointer" (click)="setPage('detailed-files')">לפירוט מלא ></span>
  </div>
  <div class="d-flex">
    <span class="w-50 text-right">מספר רשומות: {{process_details.records_count}}</span>
    <span class="pointer" (click)="setPage('detailed-records')">לפירוט מלא ></span>
  </div>
  <div class="mt-4 d-flex" *ngIf="isRefund" >
    <p class="text-right bold red-color f-12">שים לב!</p>
    <p class="f-12 mr-2">בשידור לקופות הנך מאשר כי קובץ ההצהרה לבקשת החזר יהיה ממוען לחברות המנהלות בקובץ</p>
  </div>
  <div class="mt-5 text-center" *ngIf="!isRefund">
    <button class="btn blue-btn" (click)="Refund()">יצירת בקשת החזר כספי</button>
  </div>
</div>
