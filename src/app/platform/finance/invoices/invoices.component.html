<p class="h4 mb-4">חשבונות חייבים</p>
<div class="d-flex align-items-center flex-wrap mb-3 filter-row">
  <!--<bd-select [items]="departments" placeholder="מחלקה" class="ml-3"></bd-select>-->
  <bd-select [items]="selectStatus" placeholder="סטטוס" [(ngModel)]="searchCriteria['status']" (onSelect)="search()" class="ml-3"></bd-select>
  <mat-form-field class="col-2">
  <input matInput class="pointer" (click)="datePickerRequest2.open()" [matDatepicker]="datePickerRequest2" placeholder="בגין חודש" name="dateRequest2"  [(ngModel)]="searchCriteria['for_month']" (dateChange)="valueDateChange2($event.value)" readonly>
  <mat-datepicker-toggle matSuffix [for]="datePickerRequest2"></mat-datepicker-toggle>
  <mat-datepicker #datePickerRequest2></mat-datepicker>
  <mat-error>שדה חובה.</mat-error>
  </mat-form-field>
  <mat-form-field>
    <input matInput class="pointer" (click)="datePickerRequest.open()" [matDatepicker]="datePickerRequest" placeholder=" תאריך יצירת בקשה" name="dateRequest"  [(ngModel)]="searchCriteria['request_created_at']" (dateChange)="valueDateChange($event.value)" readonly>
    <mat-datepicker-toggle matSuffix [for]="datePickerRequest"></mat-datepicker-toggle>
    <mat-datepicker #datePickerRequest></mat-datepicker>
    <mat-error>שדה חובה.</mat-error>
  </mat-form-field>
  <input class="mr-3" [(ngModel)]="searchCriteria['amount']" (change)="search()" placeholder="סכום">
  <input class="mr-3" [(ngModel)]="searchCriteria['green_invoice_id']" (change)="search()" placeholder="מספר חשבונית">
  <button class="mr-3 btn blue-btn h-75" *ngIf="isSearchActive()" (click)="resetSearch()">אפס חיפוש</button>
>>>>>>> c741165b540c8a053d12799ae02b46fdb2093173
</div>
<div class="d-flex filter-row">
  <button class="btn blue-btn" (click)="openFinanceExcelDialog()">אקסל מעסיקים</button>
  <!--<button class="btn blue-btn" (click)="openManualInvoice()">חשבון ידני</button>-->
  <button class="btn blue-btn mr-2" (click)="openProactiveInvoice()">חשבון יזום</button>
  <!--<button class="btn blue-btn mr-2" [routerLink]="['./', 'errors']">שגיאות</button>-->
  <!--<button class="btn blue-btn mr-2 big-btn" (click)="sendToGreenInvoice()">שליחה לחשבונית ירוקה</button>-->
  <!--<i matPrefix class="fa fa-user"></i>-->
  <!--<i matPrefix class="fa fa-file-excel"></i>-->
</div>
<table class="table table-bordered table-hover mt-3 data-table">
  <thead>
  <tr class="table-headers">
    <th *ngIf="items.length > 0">
      <mat-checkbox (change)="checkAll($event.checked)" [ngModel]="isCheckAll"></mat-checkbox>
    </th>
    <th *ngFor="let header of headers" (click)="sort(header)">
      <span class="pointer" [matTooltip]="'מיין לפי ' + header.label">{{ header.label }}</span>
      <i [class]="getHeaderIconClass()" *ngIf="orderCriteria.orderBy === header.column"></i>
    </th>
  </tr>
  </thead>
  <tbody>
  <ng-container *ngIf="!isSearching">
    <tr *ngFor="let item of paginatedItems" class="pointer" [ngClass]="{ 'checked': item.isChecked }">
      <td class="check-column">
        <mat-checkbox (change)="checkItem(item, $event.checked)" [checked]="isCheckAll"></mat-checkbox>
      </td>
      <td>{{ item.employer_financial_details.employer.name}}</td>
      <!--matTooltip={{item.errorDescription}}-->
      <td >{{ item.green_invoice_document !== null ? item.green_invoice_document.number : ''}}</td>
      <td>{{ item.total_amount }}</td>
      <td>{{ item.ids_count }}</td>
      <td>{{ item.for_month  | date: 'MM/yy' }}</td>
      <td>{{ item.created_at  | date: 'dd/MM/yy' }}</td>
      <td>{{ item.last_payment_date  | date: 'dd/MM/yy'  }}</td>
      <td>חשבון עסקה</td>
      <td [matTooltip]=" item.green_invoice_document !== null &&  item.green_invoice_document.errorDescription !== '' ? item.green_invoice_document.errorDescription : ''">{{ invoice_all_status[item.status] }}</td>
      <td><i class="fa fa-eye fa-lg" (click)="ShowRemarks(item)"></i></td>
      <i class="fa fa-eye fa-lg" (click)="ShowRemarks(item)" *ngIf="item.status === 'closed'"></i>
      <td></td>
    </tr>
  </ng-container>
  <tr *ngIf="!isSearching && items.length === 0">
    <td colspan="19" class="text-center bold">טבלת הבקשות ריקה.</td>
  </tr>
  </tbody>
</table>
<app-pagination [data]="paginationData" *ngIf="items.length > 0"></app-pagination>

