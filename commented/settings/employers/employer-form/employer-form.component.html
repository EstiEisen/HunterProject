
<div class="container-fluid">
<p class="title text-center mb-3">עדכון פרטי מעסיק</p>
<form #f="ngForm" (ngSubmit)="submit(f.valid)" novalidate>
  <button class="btn btn-primary mb-2" routerLink="/settings/employers">חזרה לטבלה</button>
  <section class="mb-3 mt-3">
    <div class="sub-title-container">
      <div class="horizontal-line"></div>
      <p class="h6 sub-title blue">
        <span>פרטי מעסיק</span>
        <span *ngIf="employer.id">- {{ employer.id }}</span>
      </p>
      <div class="horizontal-line"></div>
    </div>
    <div class="row">
      <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.name" #name="ngModel" placeholder="שם מעסיק" name="name" required>
        <mat-error *ngIf="name.errors && f.submitted">שדה חובה.</mat-error>
      </mat-form-field>
      <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.businessNumber" #businessNumber="ngModel" placeholder="ח.פ" name="businessNumber" required pattern="^\d{9}$">
        <mat-error *ngIf="businessNumber.errors && f.submitted && businessNumber.value === ''">שדה חובה.</mat-error>
        <mat-error *ngIf="businessNumber.errors && f.submitted && businessNumber.value !== ''">ח.פ אינו תקין.</mat-error>
      </mat-form-field>
      <mat-form-field class="col-md-3">
      <input matInput type="text" [(ngModel)]="employer.instituteCode5" #instituteCode5="ngModel" placeholder="קוד מוסד - 5" name="instituteCode5" pattern="^\d{5}$">
      <mat-error *ngIf="instituteCode5.errors && instituteCode5.touched">קוד מוסד לא תקין.</mat-error>
      </mat-form-field>
    </div>
     <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.instituteCode8" #instituteCode8="ngModel" placeholder="קוד מוסד - 8" name="instituteCode8" pattern="^\d{8}$">
        <mat-error *ngIf="instituteCode8.errors && instituteCode8.touched">קוד מוסד לא תקין.</mat-error>
      </mat-form-field>
    <div class="row">
     
      <!-- <mat-form-field class="col">
      <input matInput type="text" [(ngModel)]="employer.deductionNumber" #deductionNumber="ngModel" placeholder="מס' תיק ניכויים" name="deductionNumber" pattern="^\d{9}$">
      <mat-error *ngIf="deductionNumber.errors && deductionNumber.touched">מס' תיק ניכויים אינו תקין.</mat-error>
      </mat-form-field> -->
    
    </div>
  </section>
  <section class="mb-3 mt-3">
    <div class="sub-title-container">
      <div class="horizontal-line"></div>
      <p class="h6 sub-title blue">פרטי התקשרות</p>
      <div class="horizontal-line"></div>
    </div>
    <div class="row">
      <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.phone" placeholder="מס' טלפון" name="phone">
      </mat-form-field>
        <mat-form-field class="col-md-3">
        <input matInput type="email" [(ngModel)]="employer.email" #email="ngModel" placeholder="כתובת מייל" pattern="^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$" name="email">
        <mat-error *ngIf="email.errors && email.touched">כתובת מייל לא תקינה.</mat-error>
      </mat-form-field>
      <!-- <mat-form-field class="col">
        <input matInput type="text" [(ngModel)]="employer.secondaryPhone" placeholder="מס' טלפון משני" name="secondaryPhone">
      </mat-form-field> -->
      <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.mobile" placeholder="מס' נייד" name="mobile">
      </mat-form-field>
        <mat-form-field class="col-md-3">
        <input matInput type="text" [(ngModel)]="employer.fax" placeholder="מס' פקס" name="fax">
      </mat-form-field>
    </div>
   
    <div class="row">
      <mat-form-field class="col-4">
        <input matInput type="text" [(ngModel)]="employer.address" placeholder="כתובת" name="address">
      </mat-form-field>
      <!-- <mat-form-field class="col-4">
        <input matInput type="number" [(ngModel)]="employer.employeeCount" placeholder="מספר מועסקים" name="employeeCount">
      </mat-form-field> -->
    </div>
  </section>
  <section class="mb-3 mt-3">
    <div class="sub-title-container">
      <div class="horizontal-line"></div>
      <p class="h6 sub-title blue">חשבון בנק</p>
      <div class="horizontal-line"></div>
    </div>
    <div class="row align-items-center">
      <!-- <mat-form-field class="col pt-3">
        <mat-select placeholder="בנק" name="bank" [(ngModel)]="employer.bankBranch.bank.id" (change)="loadBankBranches($event.value)">
          <mat-option *ngFor="let bank of banks" [value]="bank.id">{{ bank.text }}</mat-option>
        </mat-select>
      </mat-form-field> -->
      <!-- <mat-form-field class="col pt-3">
        <mat-select placeholder="סניף" name="branch" [(ngModel)]="employer.bankBranch.id">
          <mat-option *ngFor="let branch of bankBranches" [value]="branch.id">{{ branch.text }}</mat-option>
        </mat-select>
      </mat-form-field> -->

      <div class="col pt-3">

        <select2 class="" id="empFormSelect2" [value]="bankSelected"  [data]="banks" [options]="select2Options" (valueChanged)="setBank($event.value)"  #select2></select2>
      </div>

     
      <div class="col pt-3">
        <select2 class="" id="empFormSelect2" [value]="bankBranchSelected"  [data]="bankBranches" [options]="select2Options" (valueChanged)="setBankBranch($event.value)"  #select2></select2>
      </div>
      
      <div class="col pt-3">
          <input matInput type="number" [(ngModel)]="employer.bankAccountNumber"  placeholder="מס' חשבון" name="bankAccountNumber" >
        </div>
        
     <!--  <mat-form-field class="col-md-3">
          <input matInput type="number" [(ngModel)]="employer.bankAccountNumber" #bankAccountNumber="ngModel" placeholder="מס' חשבון" name="bankAccountNumber" required>
        <mat-error *ngIf="bankAccountNumber.errors && f.submitted">שדה חובה.</mat-error>
      </mat-form-field> -->

      
       
    </div>
    <!-- <div class="row">
      <mat-form-field class="col">

      <mat-select placeholder="סוג מזהה לשליחה" name="employerTypeSent" [(ngModel)]="employer.typeSent">
        <mat-option *ngFor="let typeSent of typeSentOptions" [value]="typeSent.Value">
          {{ typeSent.Key }}
        </mat-option>
      </mat-select>
      </mat-form-field>








      <mat-form-field class="col">
        <input matInput type="text" [(ngModel)]="employer.employerCodeSent" placeholder="מספר מזהה לשליחה" name="employerCodeSent">
      </mat-form-field>
    </div> -->
    <div class="row">
      <mat-form-field class="col-6 w-100">
        <textarea matInput placeholder="הערות" [(ngModel)]="employer.comments" name="comments"></textarea>
      </mat-form-field>
    </div>
  </section>
  <mat-spinner class="mr-auto ml-auto mb-3" *ngIf="isSubmitting"></mat-spinner>
  <p class="alert alert-danger" *ngIf="isSuccessful === false">קרתה שגיאה, אנא נסה שנית או צור קשר.</p>
  <div class="text-center text-md-left form-actions">
    <button type="submit" class="btn btn-primary">שמור</button>
  </div>
</form>
</div>