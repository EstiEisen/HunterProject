<div class="data-table">
  <div class="data-table-actions">
    <select2 [data]="products" [value]="0" [options]="select2Options" (valueChanged)="setSearch('productID', $event.value)"></select2>
    <select2 class="mr-3" [data]="employees" [options]="select2Options" (valueChanged)="setSearch('employeeID', $event.value)" #select2></select2>
    <mat-form-field class="mr-3">
      <mat-select placeholder="בחר סינון" [(ngModel)]="searchCriteria['filterID']" (selectionChange)="search()">
        <mat-option *ngFor="let filter of filters" [value]="filter.id">{{ filter.text }}</mat-option>
      </mat-select>
    </mat-form-field>
    <mat-form-field class="mr-3">
      <input matInput type="text" placeholder="חיפוש כללי" (change)="search()" [(ngModel)]="searchCriteria['search']">
    </mat-form-field>
  </div>
  <table class="table table-bordered table-striped">
    <thead>
    <tr>
      <th>שם העובד</th>
      <th>ת"ז</th>
      <th>סוג תקבול</th>
      <th>מספר קופה בשכר</th>
      <th>שם קופה בשכר</th>
      <th>סוג קופה</th>
      <th>סטטוס</th>
      <th>שם קופה</th>
      <th>מספר באוצר</th>
      <th>חודש תשלום</th>
      <th>חודש ייחוס</th>
      <th>שכר</th>
      <th *ngIf="showFields['SumPitzuim']">פיצויים</th>
      <th *ngIf="showFields['SumMaasik']">הפרשת מעסיק</th>
      <th *ngIf="showFields['SumOved']">הפרשת עובד</th>
      <th *ngIf="showFields['ShonotMaasik']">שונות מעסיק</th>
      <th *ngIf="showFields['ShonotOved']">שונות עובד</th>
      <th *ngIf="showFields['SumTagmulim']">תגמול 47</th>
      <th *ngIf="showFields['SumTagmulimPrat']">אובדן כושר עבודה פרט</th>
      <th *ngIf="showFields['Ovdankosher']">אובדן כושר עבודה</th>
    </tr>
    </thead>
    <tbody>
      <ng-container *ngIf="!isSearching">
        <tr *ngFor="let item of paginatedItems">
          <td>{{ item.employee.firstName + ' ' + item.employee.lastName }}</td>
          <td>{{ item.employee.identityNumber }}</td>
          <td>{{ getSugTakbulLabel(item.sugTakbul) }}</td>
          <td>{{ item.productEmployer.ProductIdInEmployer }}</td>
          <td>{{ item.productEmployer.name }}</td>
          <td>{{ getProductTypeLable(item.product.productType) }}</td>
          <!--product.labels.types[product.productType[item.product.productType]]-->
          <td>{{ getStatusDepositLable(item.statusDeposit) }}</td>
          <td>{{ item.product.name }}</td>
          <td>{{ item.product.id }}</td>
          <td>{{ item.dateMonthPay | date: 'dd/MM/yyyy' }}</td>
          <td>{{ item.TaarichErech | date: 'dd/MM/yyyy' }}</td>
          <td>{{ item.Salary }}</td>
          <td *ngIf="showFields['SumPitzuim']">{{ item.SumPitzuim }}</td>
          <td *ngIf="showFields['SumMaasik']">{{ item.SumMaasik }}</td>
          <td *ngIf="showFields['SumOved']">{{ item.SumOved }}</td>
          <td *ngIf="showFields['ShonotMaasik']">{{ item.ShonotMaasik }}</td>
          <td *ngIf="showFields['ShonotOved']">{{ item.ShonotOved }}</td>
          <td *ngIf="showFields['SumTagmulim']">{{ item.SumTagmulim }}</td>
          <td *ngIf="showFields['SumTagmulimPrat']">{{ item.SumTagmulimPrat }}</td>
          <td *ngIf="showFields['Ovdankosher']">{{ item.Ovdankosher }}</td>
        </tr>
      </ng-container>
      <tr *ngIf="items.length === 0">
        <td colspan="20">לא נמצאו תוצאות.</td>
      </tr>
      <tr *ngIf="isSearching">
        <td colspan="20">
          <mat-spinner class="mr-auto ml-auto"></mat-spinner>
        </td>
      </tr>
    </tbody>
  </table>
  <app-pagination [data]="paginationData" (isLinkClicked)="paginateItems()" *ngIf="items.length > 0"></app-pagination>
</div>

