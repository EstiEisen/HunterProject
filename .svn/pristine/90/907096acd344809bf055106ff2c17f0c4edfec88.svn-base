

   <div class="d-flex justify-content-between">
        <div>
          <p class="mb-5 title">מעקב שגויים - לפי קובץ</p>
        </div>
        <div class="DivSelect">
                <app-employers-select2 (changeEmployerEvent)="setEmployer($event)" class="selectEmployer"></app-employers-select2>
                   <mat-form-field class="ml-3">
        <mat-select placeholder="בחר שנה" [(ngModel)]="selectedYearValue" (selectionChange)="setYear($event.value)">
          <mat-option [value]="currentYear">{{ currentYear }}</mat-option>
          <mat-option [value]="currentYear - 1">{{ currentYear - 1 }}</mat-option>
          <mat-option [value]="currentYear - 2">{{ currentYear - 2 }}</mat-option>
          <mat-option [value]="currentYear - 3">{{ currentYear - 3 }}</mat-option>
        </mat-select>
      </mat-form-field>
        </div>
    </div>



<div class="data-table container-fluid">
  <div class="table-actions">
    <div class="row"> 


      <!-- <mat-form-field class="ml-3">
        <mat-select placeholder="בחר מעסיק" [(ngModel)]="searchCriteria['employerID']" (selectionChange)="newSearch()">
          <mat-option *ngFor="let employer of employers" [value]="employer.id">{{ employer.name }}</mat-option>
        </mat-select>
      </mat-form-field> -->
   
      <mat-form-field class="ml-3">
        <mat-select placeholder="סטטוס פנייה" [(ngModel)]="searchCriteria['appStatusID']" (selectionChange)="searchselect()">
          <mat-option [value]="-1">הכל</mat-option>
          <mat-option *ngFor="let itemappStatus of appStatus" [value]="itemappStatus.id">{{ itemappStatus.text }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select placeholder="נושא פניה" [(ngModel)]="searchCriteria['SubjectID']" (selectionChange)="searchselect()">
          <mat-option [value]="-1">הכל</mat-option>
          <mat-option *ngFor="let Subject of appSubject" [value]="Subject.id">{{ Subject.text }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר סטטוס" [(ngModel)]="searchCriteria['statusID']" (selectionChange)="searchselect()">
          <mat-option [value]="-1">הכל</mat-option>
          <mat-option *ngFor="let status of statuses" [value]="status.id">{{ status.text }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select style="text-align: right;" placeholder="בחר חברה מנהלת" [(ngModel)]="searchCriteria['manufacturerID']" (selectionChange)="searchselect()">
          <mat-option [value]="-1">הכל</mat-option>
          <mat-option *ngFor="let manufacturer of manufacturers" [value]="manufacturer.id">{{ manufacturer.text }}</mat-option>
        </mat-select>
      </mat-form-field>
   
      <mat-form-field class="mr-3">
        <mat-select [(ngModel)]="searchCriteria['months']" (selectionChange)="setMonths($event.value)" placeholder="חודש" multiple>
          <div class="clear-selection">
            <span (click)="selectAllMonths()">כל החודשים</span>
            <span class="link" *ngIf="searchCriteria['months'] && searchCriteria['months'].length > 0" (click)="searchCriteria['months'] = []">נקה הכל</span>
          </div>
          <mat-option *ngFor="let month of months; let i = index" [value]="i + 1">{{ month }}</mat-option>
        </mat-select>
      </mat-form-field>
    <!-- <div class="row" *ngIf="chips.length>0" >
      <mat-chip-list mdPrefix>
        <mat-chip *ngFor="let chip of chips; let i = index" color="accent">
          {{chip.text}}
          <i class="fa fa-close" (click)="remove(index)"></i>
        </mat-chip>
      </mat-chip-list> -->
    </div>
    <!-- <mat-chip-list class="mr-6">
    <mat-chip *ngFor="let processe of processes" color="primary"  md-enable-chip-edit="true" class="chip">
        {{processe.text}}
    </mat-chip>
      </mat-chip-list> -->
    <!-- <select2 class="ml-3" [data]="processes" [value]="selectedValue" [options]="select2Options"
       (valueChanged)="setSearch('processId', $event.value)"></select2> -->
  </div>


<table class="table table-bordered table-striped">
  <thead>
    <tr>
    
      <th>שם יצרן</th>
      <th>סוג</th>
    
      <th>חודש שכר</th>
      <th>סכום תשלום</th>
      <th>יצירת פניה</th>
      <th>עידכון פניה</th>
      <th>סטטוס</th>
      <th>סטטוס פניה</th>
      <th>שלח פניה</th>
     <th>מידע נוסף</th>
      <th>הערה</th>
    </tr>
  </thead>
  <tbody>
    <tr *ngIf="items.length== 0">
       <td colspan="11" style="text-align:center; background-color: #eceeef; color: #0c0c0c;
	width: 100%" >

        לא נמצאו נתונים
      </td>
    </tr>
    <tr *ngFor="let item of items" class="pointer overTr" >
      <!-- <td>{{ item.process.addToProcessName }}</td> -->
      <td >{{ item.manufacturer.name }}</td>
      <td>{{ getproductTypeLabel(item.productType) }}</td>
     <!-- <td (click)="openDetailsDialog(item)">{{ item.applicationsSubjectText }}</td> -->
    
      <!-- <td>{{getPayTypeLabel(item.payType)}}</td> -->
      <td>{{item.MonthValueDate | date: 'MM/yyyy'}}</td>
      <td>{{item.sumFile | number}}</td>
 
      <!-- <td>
        <span class="word-break">{{ item.fileName }}</span>
      </td> -->
      <td>{{ item.createdAtApplications| date: 'dd/MM/yyyy' }}</td>
      <td>{{ item.UpdateAtApplications| date: 'dd/MM/yyyy'  }}</td>
      <td>{{ item.manualStatusUpdateText }}</td>
      <td>{{ item.ApplicationStatusText }}</td>

         <td  class="text-center grey-color pointer">
    <i class="fa fa-envelope-o fa-lg icon-background2" (click)="openDetailsDialog(item)" matTooltip="לחץ לשליחת פנייה" matTooltipPosition="above"
       [matTooltipClass]="'mytooltip'"  aria-hidden="true"></i></td>
       <td  class="text-center grey-color">
          <i class="fa fa-info-circle" (click)="openProductDetailsDialog(item)"></i>
     </td>
     <td class="text-center grey-color">
          <i class="fa fa-comment" (click)="openCommentDialog(item,true)" [title]="item.Comments"   [ngStyle]="{'color':item.Comments!='' ? 'green' : '' }"></i>
        </td>
      <!-- <td>{{item.remarkManual}}</td> -->

    </tr>
  </tbody>
</table>
<app-pagination [data]="paginationData"  *ngIf="items.length > 0"></app-pagination>
</div>