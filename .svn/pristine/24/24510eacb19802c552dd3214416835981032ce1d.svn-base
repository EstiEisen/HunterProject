<p class="mb-5 title">היזונים חוזרים - לפי עובד</p>
<div class="data-table">
  <div class="table-actions">
    <div>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר מעסיק" [(ngModel)]="searchCriteria['employerID']" (selectionChange)="search()">
          <mat-option *ngFor="let employer of employers" [value]="employer.id">{{ employer.name }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר סטטוס" [(ngModel)]="searchCriteria['status']" (selectionChange)="search()">
          <mat-option value="successful">נפרעו</mat-option>
          <mat-option value="partial">נפרעו חלקית</mat-option>
          <mat-option value="failed">לא נפרעו</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר סוג מוצר" [(ngModel)]="searchCriteria['typeID']" (selectionChange)="search()">
          <mat-option *ngFor="let product of products" [value]="product.id">{{ product.name }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר חברה מנהלת" [(ngModel)]="searchCriteria['manufacturerID']" (selectionChange)="search()">
          <mat-option *ngFor="let manufacturer of manufacturers" [value]="manufacturer.id">{{ manufacturer.name }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field class="ml-3">
        <mat-select placeholder="בחר שנה" [(ngModel)]="searchCriteria.year" (selectionChange)="search()">
          <mat-option [value]="currentYear">{{ currentYear }}</mat-option>
          <mat-option [value]="currentYear - 1">{{ currentYear - 1 }}</mat-option>
        </mat-select>
      </mat-form-field>
      <mat-form-field>
        <mat-select placeholder="בחר חודש" [ngModel]="searchCriteria['month']" (selectionChange)="setMonths($event.value)">
          <mat-option value="full">כל החודשים</mat-option>
          <mat-option *ngFor="let month of months; let i = index" [value]="i + 1">{{ month }}</mat-option>
        </mat-select>
      </mat-form-field>
    </div>
    <div class="mt-3 mb-3">
      <mat-slide-toggle [(ngModel)]="searchCriteria['showNegative']" color="primary" (change)="search()">{{ searchCriteria['showNegative'] ? 'חיובי' : 'שלילי' }}</mat-slide-toggle>
    </div>
  </div>
  <table class="table table-bordered table-striped data-table">
    <thead>
    <tr>
      <th>שם עובד</th>
      <th>תעודת זהות</th>
      <th>חברה מנהלת</th>
      <th>סוג מוצר</th>
      <th>חודש שכר</th>
      <th>מספר באוצר</th>
      <th>סכום</th>
      <th>סטטוס</th>
      <th>פרטים</th>
    </tr>
    </thead>
    <tbody>
    <tr *ngFor="let item of items">
      <td>{{ item.employee.firstName + ' ' + item.employee.lastName }}</td>
      <td>{{ item.employee.identityNumber }}</td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td></td>
      <td class="text-center">
        <span class="badge" [ngClass]="{ 'badge-success': item.status === 'successful' , 'badge-warning':
        item.status === 'partial', 'badge-danger': item.status === 'failed' }">{{ feedback.labels['status'][item.status] }}</span>
      </td>
      <td class="text-center row-actions">
        <i class="fa fa-exclamation-circle" (click)="openDetailsDialog(item)"></i>
      </td>
    </tr>
    </tbody>
  </table>
  <app-pagination [data]="paginationData" (isLinkClicked)="paginateItems()" *ngIf="items.length > 0"></app-pagination>
</div>

